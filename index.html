<!DOCTYPE html>
<html lang="zh-Hans">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.1.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"yoursite.com","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="Action speak louder than words.">
<meta property="og:type" content="website">
<meta property="og:title" content="Nolan&#39;s Notes">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Nolan&#39;s Notes">
<meta property="og:description" content="Action speak louder than words.">
<meta property="og:locale">
<meta property="article:author" content="Nolan Chic">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://yoursite.com/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-Hans'
  };
</script>

  <title>Nolan's Notes</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Nolan's Notes</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/08/15/Structure/PAAS%E3%80%81IAAS%E5%92%8CSAAS%E4%B9%8B%E9%97%B4%E7%9A%84%E5%8C%BA%E5%88%AB/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nolan Chic">
      <meta itemprop="description" content="Action speak louder than words.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Nolan's Notes">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/08/15/Structure/PAAS%E3%80%81IAAS%E5%92%8CSAAS%E4%B9%8B%E9%97%B4%E7%9A%84%E5%8C%BA%E5%88%AB/" class="post-title-link" itemprop="url">PAAS、IAAS和SAAS之间的区别</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-08-15 21:22:33" itemprop="dateCreated datePublished" datetime="2018-08-15T21:22:33+08:00">2018-08-15</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-09-16 18:47:34" itemprop="dateModified" datetime="2020-09-16T18:47:34+08:00">2020-09-16</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Structure/" itemprop="url" rel="index"><span itemprop="name">Structure</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="PAAS、IAAS和SAAS之间的区别"><a href="#PAAS、IAAS和SAAS之间的区别" class="headerlink" title="PAAS、IAAS和SAAS之间的区别"></a>PAAS、IAAS和SAAS之间的区别</h1><p>云计算的发展这几年大家也看到了，非常火热。各种新概念层出不穷，如果你不是专业人士，这些新概念让你一脸茫然是很正常的。</p>
<p>所以最近比较多的小伙伴向我咨询一个问题，那就是PAAS、IAAS和SAAS之间的区别？正好今天小编比较闲，就在这为大家解释一下。当然首先请允许小编从专业的角度来解释一下PAAS、IAAS和SAAS之间的概念区别。</p>
<p>用户通过Internet 可以从完善的计算机基础设施获得服务。这类服务可以称为基础设施即服务，这就是通常所说的IAAS。而相应的另外两种服务就是平台即服务和软件即服务。平台及服务提供了用户可以访问的完整或部分的应用程序开发,我们通常称之为PAAS。软件及服务则提供了完整的可直接使用的应用程序，我们通常称之为SAAS。如果把他们看作层次结构，那么第一层自然叫做IAAS，第二层就是PAAS，第三层也就是SAAS。好了专业的就说到这里，想必很多小伙伴还是一知半解。那么下面开始说人话。</p>
<p>假设、如果、假如你是个吃货，而且还非常喜欢披萨这种食品，那么这个问题就很好解释了。一个吃货是怎样吃到披萨的呢?大致有下面的几种方法：</p>
<h3 id="1-完全自己做"><a href="#1-完全自己做" class="headerlink" title="1. 完全自己做"></a>1. 完全自己做</h3><p>不好意思，如果自己做这实在是个麻烦事，你得准备很多东西，比如餐桌、披萨面团。。。。。等等，如下图所示：</p>
<p><img src="https://i.loli.net/2020/09/16/e6hflnkHrwsqKTz.jpg"></p>
<h3 id="2-买好速食披萨回家自己做着吃"><a href="#2-买好速食披萨回家自己做着吃" class="headerlink" title="2. 买好速食披萨回家自己做着吃"></a>2. 买好速食披萨回家自己做着吃</h3><p>你只需要从披萨店里买回成品，回家烘焙就好了，在自己的餐桌上吃。和自己在家做不同，你需要一个披萨供应商。如下图所示：</p>
<p><img src="https://i.loli.net/2020/09/16/rjwPxyUgh5u9VAS.jpg"></p>
<h3 id="3-打电话叫外卖将披萨送到家中"><a href="#3-打电话叫外卖将披萨送到家中" class="headerlink" title="3. 打电话叫外卖将披萨送到家中"></a>3. 打电话叫外卖将披萨送到家中</h3><p>打个电话，披萨就送到家门口。如下图所示：</p>
<p><img src="https://i.loli.net/2020/09/16/oOF5DYeNthUvpwA.jpg"></p>
<h4 id="4-在披萨店吃披萨"><a href="#4-在披萨店吃披萨" class="headerlink" title="4.在披萨店吃披萨"></a>4.在披萨店吃披萨</h4><p>你什么都不需要准备，连餐桌也是披萨店的。如下图所示：</p>
<p><img src="https://i.loli.net/2020/09/16/mDjlvR9QsAqC2LU.jpg"></p>
<h4 id="总结一下"><a href="#总结一下" class="headerlink" title="总结一下"></a>总结一下</h4><p>是不是如下图所示几种途径都可以吃到披萨：</p>
<p><img src="https://i.loli.net/2020/09/16/EhmPr7JsbIXM14Z.jpg"></p>
<p>现在我们从披萨中回到云计算的概念来。假设你是一家超级牛逼的技术公司，根本不需要别人提供服务，你拥有基础设施、应用等等其它一切，你把它们分为三层：基础设施(infrastructure)、平台(platform)和软件(software)，如下图：</p>
<p><img src="https://i.loli.net/2020/09/16/OEWBDTFulbr745R.jpg"></p>
<p>这其实就是云计算的三个分层，基础设施在最下端，平台在中间，软件在顶端，分别是Infrastructure-as-a-Service(IAAS)，Platform-as-a-Service(PAAS)，Software-as-a-Service(SAAS)，别的一些“软”的层可以在这些层上面添加。</p>
<p>而你的公司什么都有，现在所处的状态叫本地部署(On-Premises)，就像在自己家做披萨一样。如果你想在办公室或者公司的网站上运行一些企业应用，你需要去买服务器，或者别的高昂的硬件来控制本地应用，让你的业务运行起来，这就叫本地部署。</p>
<p>假如你突然有一天想明白了，只是为了吃上披萨，为什么非要自己做呢?于是，准备考虑一家云服务供应商，这个云服务供应商能提供哪些服务呢?其所能提供的云服务也就是云计算的三个分层：PAAS、IAAS和SAAS，就像披萨店提供三种服务：买成品回家做、外卖和到披萨店吃。如下图：</p>
<p><img src="https://i.loli.net/2020/09/16/hTq31DPZ5468ezK.jpg"></p>
<p>IAAS: Infrastructure-as-a-Service(基础设施即服务)，有了IAAS，你可以将硬件外包到别的地方去。IAAS公司会提供场外服务器，存储和网络硬件，你可以租用。节省了维护成本和办公场地，公司可以在任何时候利用这些硬件来运行其应用。一些大的IAAS公司包括Amazon, Microsoft, VMWare, Rackspace和Red Hat.不过这些公司又都有自己的专长，比如Amazon和微软给你提供的不只是IAAS，他们还会将其计算能力出租给你来host你的网站。</p>
<p>PAAS: Platform-as-a-Service(平台即服务)，第二层就是所谓的PAAS，某些时候也叫做中间件。你公司所有的开发都可以在这一层进行，节省了时间和资源。</p>
<p>PAAS公司在网上提供各种开发和分发应用的解决方案，比如虚拟服务器和操作系统。这节省了你在硬件上的费用，也让分散的工作室之间的合作变得更加容易。网页应用管理，应用设计，应用虚拟主机，存储，安全以及应用开发协作工具等。</p>
<p>一些大的PAAS提供者有Google App Engine,Microsoft Azure，Force.com,Heroku，Engine Yard。最近兴起的公司有AppFog,Mendix和Standing Cloud.</p>
<p>SAAS: Software-as-a-Service(软件即服务)，第三层也就是所谓SAAS。这一层是和你的生活每天接触的一层，大多是通过网页浏览器来接入。任何一个远程服务器上的应用都可以通过网络来运行，就是SAAS了。你消费的服务完全是从网页如Netflix,MOG,Google Apps,Box.net,Dropbox或者苹果的iCloud那里进入这些分类。尽管这些网页服务是用作商务和娱乐或者两者都有，但这也算是云技术的一部分。一些用作商务的SaaS应用包括Citrix的Go To Meeting，Cisco的WebEx，Salesforce的CRM，ADP，Workday和SuccessFactors。</p>
<p>参考文档</p>
<p><a target="_blank" rel="noopener" href="http://www.ruanyifeng.co/">IaaS,PaaS,SaaS 的区别 - 阮一峰的网络日志</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/08/07/Algorithm/BubbleSort/bubble/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nolan Chic">
      <meta itemprop="description" content="Action speak louder than words.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Nolan's Notes">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/08/07/Algorithm/BubbleSort/bubble/" class="post-title-link" itemprop="url">BubbleSort</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-08-07 23:19:36" itemprop="dateCreated datePublished" datetime="2018-08-07T23:19:36+08:00">2018-08-07</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-09-16 18:45:11" itemprop="dateModified" datetime="2020-09-16T18:45:11+08:00">2020-09-16</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Algorithm/" itemprop="url" rel="index"><span itemprop="name">Algorithm</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Algorithm/BubbleSort/" itemprop="url" rel="index"><span itemprop="name">BubbleSort</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="冒泡排序"><a href="#冒泡排序" class="headerlink" title="冒泡排序"></a>冒泡排序</h1><h3 id="一、冒泡排序"><a href="#一、冒泡排序" class="headerlink" title="一、冒泡排序"></a>一、冒泡排序</h3><p>原理：对一组数据，比较相邻数据的大小，将值小数据在前面，值大的数据放在后面。   （以下都是升序排列，即从小到大排列）</p>
<p>举例说明： $arr = array(6, 3, 8, 2, 9, 1);</p>
<p>$arr 有6个数据，按照两两比较大小如下，注意  比较轮数 和 每轮比较次数 </p>
<h4 id="第一轮排序："><a href="#第一轮排序：" class="headerlink" title="第一轮排序："></a>第一轮排序：</h4><p>第一次比较  6和3比较 结果：<strong>3   6</strong>   8   2   9   1     </p>
<p>第二次比较  6和3比较 结果：3   <strong>6   8</strong>   2   9   1 </p>
<p>第三次比较  8和2比较 结果：3    6   <strong>2   8</strong>   9   1 </p>
<p>第四次比较  8和9比较 结果：3    6   2   <strong>8   9</strong>   1 </p>
<p>第五次比较  9和1比较 结果：3    6   2   8   <strong>1   9</strong> </p>
<p>第一轮比较总结：</p>
<p>1.排序第1轮、比较5次，没有获得从小到大的排序   </p>
<p>2.因为每次比较都是大数往后靠，所以比较完成后，可以确定大数排在最后（9 已经冒泡冒出来了，下轮比较可以不用比较了 ）</p>
<h4 id="第二轮排序："><a href="#第二轮排序：" class="headerlink" title="第二轮排序："></a>第二轮排序：</h4><p>第一次比较  3和6比较 结果：<strong>3    6</strong>   2   8   1   9     </p>
<p>第二次比较  6和2比较 结果：3    <strong>2   6</strong>   8   1   9 </p>
<p>第三次比较  6和8比较 结果：3    2   <strong>6   8</strong>   1   9 </p>
<p>第四次比较  8和1比较 结果：3    2   6   <strong>1   8</strong>   9</p>
<p>第一轮比较总结：</p>
<p>1.排序第2轮、比较4次，没有获得从小到大的排序</p>
<p>2.冒泡出了 8，下轮不用比较8 了</p>
<h4 id="第三轮排序："><a href="#第三轮排序：" class="headerlink" title="第三轮排序："></a>第三轮排序：</h4><p>第一次比较  3和2比较 结果：<strong>2    3</strong>   6   1   8   9     </p>
<p>第二次比较  3和6比较 结果：2    <strong>3   6</strong>   1   8   9 </p>
<p>第三次比较  6和1比较 结果：2    3   <strong>1   6</strong>   8   9 </p>
<p>第三轮比较总结：</p>
<p>1.排序第3轮、比较3次，没有获得从小到大的排序  </p>
<p>2.冒泡出了 6，下轮不用比较6 了　</p>
<h4 id="第四轮排序："><a href="#第四轮排序：" class="headerlink" title="第四轮排序："></a>第四轮排序：</h4><p>第一次比较  2和3比较 结果：2    3   1   6   8   9     </p>
<p>第二次比较  3和1比较 结果：2    1   3   6   8   9 </p>
<p>第四轮比较总结：</p>
<p>1.排序第4轮、比较2次，没有获得从小到大的排序   </p>
<p>2.冒泡出了 3，下轮不用比较3 了</p>
<h4 id="第五轮排序："><a href="#第五轮排序：" class="headerlink" title="第五轮排序："></a>第五轮排序：</h4><p>第一次比较  2和1比较 结果：1   2   3   6   8   9     </p>
<p>第五轮比较总结：</p>
<p>1.排序第5轮、比较1次，没有获得从小到大的排序  </p>
<p>2.冒泡出了 2，由于还剩一个1，不用再比较了，至此通过5轮排序，完成整个排序。</p>
<h3 id="结论"><a href="#结论" class="headerlink" title="结论"></a>结论</h3><p>通过以上五轮排序，若干次比较，我们有理由推断出一个结论：</p>
<p>对于一个长度为N的数组，我们需要排序 N-1 轮，每 i 轮 要比较 N-i 次。对此我们可以用双重循环语句，外层循环控制循环轮次，内层循环控制每轮的比较次数。</p>
<h4 id="Golang实现"><a href="#Golang实现" class="headerlink" title="Golang实现"></a>Golang实现</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">func sort_bubble(arr []int) &#123;</span><br><span class="line"></span><br><span class="line">	len :&#x3D; len(arr)</span><br><span class="line">	for i:&#x3D;1;i&lt;len;i++&#123;</span><br><span class="line">		for j:&#x3D;0;j&lt;len-i;j++&#123;</span><br><span class="line">			if arr[j] &gt; arr[j+1]&#123;</span><br><span class="line">				arr[j],arr[j+1] &#x3D; arr[j+1],arr[j]</span><br><span class="line"></span><br><span class="line">			&#125;</span><br><span class="line">			fmt.Println(arr)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println()</span><br><span class="line">	fmt.Println(arr)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line">	arr :&#x3D; [...]int&#123;6,3,8,2,9,1&#125;</span><br><span class="line">	slice :&#x3D; arr[:]</span><br><span class="line">	fmt.Println(slice)</span><br><span class="line">	fmt.Println()</span><br><span class="line">	sort_bubble2(slice)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h4 id="PHP实现"><a href="#PHP实现" class="headerlink" title="PHP实现"></a>PHP实现</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">function bubble($arr)</span><br><span class="line">&#123;</span><br><span class="line">    $count &#x3D; count($arr);</span><br><span class="line"></span><br><span class="line">    for ($i &#x3D; 1; $i &lt;$count;$i++)&#123;</span><br><span class="line">        for ($j &#x3D;0; $j&lt;$count-$i;$j++)&#123;</span><br><span class="line">            if($arr[$j] &gt; $arr[$j+1])&#123;</span><br><span class="line">                $tmp &#x3D; 0;</span><br><span class="line">                $tmp &#x3D; $arr[$j];</span><br><span class="line">                $arr[$j] &#x3D; $arr[$j+1];</span><br><span class="line">                $arr[$j+1] &#x3D; $tmp;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    print_r($arr);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$arr &#x3D; array(6, 3, 8, 2, 9, 1);</span><br><span class="line">bubble($arr);</span><br></pre></td></tr></table></figure>




      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/08/07/Algorithm/InsertionSort/insertion/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nolan Chic">
      <meta itemprop="description" content="Action speak louder than words.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Nolan's Notes">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/08/07/Algorithm/InsertionSort/insertion/" class="post-title-link" itemprop="url">InsertionSort</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-08-07 18:17:32" itemprop="dateCreated datePublished" datetime="2018-08-07T18:17:32+08:00">2018-08-07</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-09-16 18:47:34" itemprop="dateModified" datetime="2020-09-16T18:47:34+08:00">2020-09-16</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Algorithm/" itemprop="url" rel="index"><span itemprop="name">Algorithm</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Algorithm/InsertionSort/" itemprop="url" rel="index"><span itemprop="name">InsertionSort</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="直接插入排序"><a href="#直接插入排序" class="headerlink" title="直接插入排序"></a>直接插入排序</h2><p>思路分析：在要排序的一组数中，假设前面的数已经是排好顺序的，现在要把第n个数插到前面的有序数中，使得这n个数也是排好顺序的。如此反复循环，直到全部排好顺序。</p>
<p>第一趟比较前两个数，然后把第二个数按大小插入到有序表中； 第二趟把第三个数据与前两个数从后向前扫描，把第三个数按大小插入到有序表中；依次进行下去，进行了(n-1)趟扫描以后就完成了整个排序过程。</p>
<p>直接插入排序是由两层嵌套循环组成的。外层循环标识并决定待比较的数值。内层循环为待比较数值确定其最终位置。直接插入排序是将待比较的数值与它的前一个数值进行比较，所以外层循环是从第二个数值开始的。当前一数值比待比较数值大的情况下继续循环比较，直到找到比待比较数值小的并将待比较数值置入其后一位置，结束该次循环。</p>
<p>插入排序的基本方法是：每步将一个待排序的记录按其关键字的大小插到前面已经排序的序列中的适当位置，直到全部记录插入完毕为止。</p>
<h4 id="PHP实现"><a href="#PHP实现" class="headerlink" title="PHP实现"></a>PHP实现</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;直接插入排序</span><br><span class="line">function InsertSort(array &amp;$arr)&#123;</span><br><span class="line">    $count &#x3D; count($arr);</span><br><span class="line">    &#x2F;&#x2F;数组中第一个元素作为一个已经存在的有序表</span><br><span class="line">    for($i &#x3D; 1;$i &lt; $count;$i ++)&#123;</span><br><span class="line">        $temp &#x3D; $arr[$i];   &#x2F;&#x2F;设置哨兵&#x2F;临时值</span><br><span class="line">        &#x2F;&#x2F;$arr[$i];&#x2F;&#x2F;需要插入的元素; $arr[$j];&#x2F;&#x2F;需要比较的元素</span><br><span class="line">        for($j &#x3D; $i - 1;$j &gt;&#x3D; 0 &amp;&amp; $arr[$j] &gt; $temp;$j --)&#123;</span><br><span class="line">            &#x2F;&#x2F;发现插入的元素要小，交换位置</span><br><span class="line">            &#x2F;&#x2F;将后边的元素与前面的元素互换</span><br><span class="line">            $arr[$j + 1] &#x3D; $arr[$j];</span><br><span class="line">            &#x2F;&#x2F;将前面的数设置为 当前需要交换的数</span><br><span class="line">            $arr[$j] &#x3D; $temp;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h4 id="GOLANG实现"><a href="#GOLANG实现" class="headerlink" title="GOLANG实现"></a>GOLANG实现</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;直接插入排序</span><br><span class="line">func sort_insert(arr []int)&#123;</span><br><span class="line">	for i:&#x3D;1;i&lt;len(arr);i++&#123;</span><br><span class="line">		tmp :&#x3D; arr[i]</span><br><span class="line">		for j:&#x3D;i-1;j&gt;&#x3D;0 &amp;&amp; arr[j] &gt; tmp; j--&#123;</span><br><span class="line">			arr[j],arr[j+1] &#x3D; tmp,arr[j];</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line">	arr :&#x3D; [...]int&#123;6,3,8,2,9,1&#125;</span><br><span class="line">	slice :&#x3D; arr[:]</span><br><span class="line">	fmt.Println(slice)</span><br><span class="line">	fmt.Println()</span><br><span class="line">	sort_insert(slice)</span><br><span class="line">	fmt.Println(slice)</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/08/07/Algorithm/SelectionSort/Selection/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nolan Chic">
      <meta itemprop="description" content="Action speak louder than words.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Nolan's Notes">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/08/07/Algorithm/SelectionSort/Selection/" class="post-title-link" itemprop="url">SelectionSort</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-08-07 18:16:00" itemprop="dateCreated datePublished" datetime="2018-08-07T18:16:00+08:00">2018-08-07</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-09-16 18:47:34" itemprop="dateModified" datetime="2020-09-16T18:47:34+08:00">2020-09-16</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Algorithm/" itemprop="url" rel="index"><span itemprop="name">Algorithm</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Algorithm/SelectionSort/" itemprop="url" rel="index"><span itemprop="name">SelectionSort</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="选择排序"><a href="#选择排序" class="headerlink" title="选择排序"></a>选择排序</h2><p>原理： 在一列数字中，选出最小数与第一个位置的数交换。然后在剩下的数当中再找最小的与第二个位置的数交换，如此循环到倒数第二个数和最后一个数比较为止。(以下都是升序排列，即从小到大排列)</p>
<p>举例说明： $arr = array(6, 3, 8, 2, 9, 1);</p>
<h3 id="第一轮："><a href="#第一轮：" class="headerlink" title="第一轮："></a>第一轮：</h3><p>第一次比较， 第一个数 6 与（3,  8,  2,  9,  1)中 3 比较，6大，当前最小数为3，位置为 1</p>
<p>第二次比较， 最小数字 3 与（3,  8,  2,  9,  1)中 8 比较，3小，当前最小数为3，位置为 1</p>
<p>第三次比较， 最小数字 3 与（3,  8,  2,  9,  1)中 2 比较，3大，当前最小数为2，位置为 3</p>
<p>第四次比较， 最小数字 2 与（3,  8,  2,  9,  1)中 9 比较，2小，当前最小数为2，位置为 3</p>
<p>第五次比较， 最小数字 2 与（3,  8,  2,  9,  1)中 1 比较，2大，当前最小数为1，位置为 5</p>
<p>第一轮比较完成后，确定最小数为1，小于第一个数6，交换位置上的数，交换后结果为 1  3  8  2  9  6</p>
<p>总结：第一轮比较，可以确定第一个位置的最小值。</p>
<h3 id="第二轮："><a href="#第二轮：" class="headerlink" title="第二轮："></a>第二轮：</h3><p>第一次比较， 3与（8， 2,  9,  6）中 8 比较，3小，当前最小数为3，位置为 1</p>
<p>第二次比较， 3与（8， 2,  9,  6）中 2 比较，3大，当前最小数为2，位置为 3</p>
<p>第三次比较， 2与（8， 2,  9,  6）中 9 比较，2小，当前最小数为2，位置为 3</p>
<p>第四次比较， 2与（8， 2,  9,  6）中 6 比较，2小，当前最小数为2，位置为 3</p>
<p>第二轮比较完成后，确定最小数为2，小于第二个数3，交换位置上的数，交换后结果为 1  2  8  3  9  6</p>
<p>总结：第二轮比较，可以确定第二个位置的最小值。至此确定了前两个位置上的数。</p>
<h3 id="第三轮："><a href="#第三轮：" class="headerlink" title="第三轮："></a>第三轮：</h3><p>第一次比较， 8与（ 3,  9,  6）中 3 比较，8大，当前最小数为3，位置为3</p>
<p>第二次比较， 3与（ 3,  9,  6）中 9 比较，3小，当前最小数为3，位置为3</p>
<p>第三次比较， 6与（ 3,  9,  6）中 6 比较，3小，当前最小数为3，位置为3</p>
<p>第三轮比较完成后，确定最小数为3，小于第三个数8，交换位置上的数，交换后结果为 1  2  3  8  9  6</p>
<p>总结：第三轮比较，可以确定第三个位置的最小值。至此确定了前三个位置上的数。</p>
<h3 id="第四轮"><a href="#第四轮" class="headerlink" title="第四轮"></a>第四轮</h3><p>第一次比较， 8与（ 9,  6）中 9 比较，8小，当前最小数为8，位置为 3</p>
<p>第二次比较， 8与（ 9,  6）中 6 比较，8大，当前最小数为6，位置为 5</p>
<p>第四轮比较完成后，确定最小数为6，小于第四个数8交换位置上的数，交换后结果为 1  2  3  6  9  8</p>
<p>总结：第四轮比较，可以确定第四个个位置的最小值。至此确定了前四个位置上的数。</p>
<h3 id="第五轮："><a href="#第五轮：" class="headerlink" title="第五轮："></a>第五轮：</h3><p>第一次比较， 9与 8 比较，9大，当前最小数为8，位置为5</p>
<p>第五轮比较完成后，确定最小数为8，小于第五个数9，交换位置上的数，交换后结果为 1  2  3  6  8  9</p>
<p>总结：第五轮比较，可以确定第五个个位置的最小值。至此确定了前5个位置上的数。</p>
<p>##总结</p>
<p>###综合以上五轮比较，每一轮比较都可以确定一个位置，对于N个数，比较N-1轮可以确定N个位置上的数，因为确定了N-1个位置，最后一个位置也就确定了。每i轮需要排序的次数为 N-i</p>
<h4 id="PHP实现"><a href="#PHP实现" class="headerlink" title="PHP实现"></a>PHP实现</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">function selection_sort($arr)</span><br><span class="line">&#123;</span><br><span class="line">    for ($i&#x3D;0;$i&lt;count($arr)-1;$i++)&#123;   &#x2F;&#x2F; N个数,需要进行N-1轮次, 每轮次需要进行 (N-第几轮次) 次比较</span><br><span class="line"></span><br><span class="line">        $minIndex &#x3D; $i;</span><br><span class="line"></span><br><span class="line">        for ($j&#x3D;$i+1;$j&lt;count($arr);$j++)&#123;  &#x2F;&#x2F;j代表未排列好的第二个值开始到结尾</span><br><span class="line">            if($arr[$j] &lt;$arr[$minIndex]  )&#123;</span><br><span class="line">                $minIndex &#x3D; $j;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        if($i !&#x3D; $minIndex)&#123;</span><br><span class="line">            $temp &#x3D; $arr[$i];</span><br><span class="line">            $arr[$i] &#x3D; $arr[$minIndex];</span><br><span class="line">            $arr[$minIndex] &#x3D; $temp;</span><br><span class="line">            unset($temp);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    return $arr;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">echo &quot;&lt;pre&gt;&quot;;</span><br><span class="line">$arr &#x3D; array(6, 3, 8, 2, 9, 1);</span><br><span class="line">$result &#x3D; selection_sort($arr);</span><br><span class="line">print_r($result);</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h4 id="GOLANG实现"><a href="#GOLANG实现" class="headerlink" title="GOLANG实现"></a>GOLANG实现</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">func sort_selection(arr []int) []int&#123;</span><br><span class="line"></span><br><span class="line">	for i:&#x3D;0;i&lt;len(arr);i++&#123;</span><br><span class="line">		minIndex :&#x3D; i</span><br><span class="line">		for j:&#x3D;i+1;j&lt;len(arr) ;j++  &#123;</span><br><span class="line">			if arr[minIndex] &gt; arr[j]&#123;</span><br><span class="line">				minIndex &#x3D; j</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		if(i !&#x3D; minIndex)&#123;</span><br><span class="line">			arr[i],arr[minIndex] &#x3D; arr[minIndex],arr[i]</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	return arr</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line">	arr :&#x3D; [...]int&#123;6,3,8,2,9,1&#125;</span><br><span class="line">	slice :&#x3D; arr[:]</span><br><span class="line">	fmt.Println(slice)</span><br><span class="line">	fmt.Println()</span><br><span class="line">	fmt.Println(sort_selection(slice))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/08/07/Algorithm/QuickSort/quick/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nolan Chic">
      <meta itemprop="description" content="Action speak louder than words.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Nolan's Notes">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/08/07/Algorithm/QuickSort/quick/" class="post-title-link" itemprop="url">Quick Sort</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-08-07 17:57:00" itemprop="dateCreated datePublished" datetime="2018-08-07T17:57:00+08:00">2018-08-07</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-09-16 18:47:34" itemprop="dateModified" datetime="2020-09-16T18:47:34+08:00">2020-09-16</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Algorithm/" itemprop="url" rel="index"><span itemprop="name">Algorithm</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Algorithm/QuickSort/" itemprop="url" rel="index"><span itemprop="name">QuickSort</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="快速排序"><a href="#快速排序" class="headerlink" title="快速排序"></a>快速排序</h1><h3 id="基本思想："><a href="#基本思想：" class="headerlink" title="基本思想："></a>基本思想：</h3><p>快速排序（Quicksort）是对冒泡排序的一种改进。他的基本思想是：通过一趟排序将待排记录分割成独立的两部分，其中一部分的关键字均比另一部分记录的关键字小，则可分别对这两部分记录继续进行快速排序，整个排序过程可以递归进行，以达到整个序列有序的目的。</p>
<h3 id="基本算法步骤："><a href="#基本算法步骤：" class="headerlink" title="基本算法步骤："></a>基本算法步骤：</h3><p>举个栗子：<br>假如现在待排序记录是：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">6   2   7   3   8   9</span><br></pre></td></tr></table></figure>

<p>第一步、创建变量 $low 指向记录中的第一个记录，$high 指向最后一个记录，$pivot 作为枢轴赋值为待排序记录的第一个元素（不一定是第一个），这里：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$low &#x3D; 0;</span><br><span class="line">$high &#x3D; 5;</span><br><span class="line">$pivot &#x3D; 6;</span><br></pre></td></tr></table></figure>
<p>第二步、我们要把所有比 $pivot 小的数移动到 $pivot 的左面，所以我们可以开始寻找比6小的数，从 $high 开始，从右往左找，不断递减变量 $high 的值，我们找到第一个下标 3 的数据比 6 小，于是把数据 3 移到下标 0 的位置（$low 指向的位置），把下标 0 的数据 6 移到下标 3，完成第一次比较：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;这时候,$high 减小为 3</span><br><span class="line">$low &#x3D; 0;</span><br><span class="line">$high &#x3D; 3;</span><br><span class="line">$pivot &#x3D; 6;</span><br></pre></td></tr></table></figure>

<p>第三步、我们开始第二次比较，这次要变成找比 $pivot 大的了，而且要从前往后找了。递加变量 $low，发现下标 2 的数据是第一个比 $pivot 大的，于是用下标 2 （$low 指向的位置）的数据 7 和 指向的下标 3 （$high 指向的位置）的数据的 6 做交换，数据状态变成下表：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">3   2   6   7   8   9</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;这时候,$high 减小为 3</span><br><span class="line">$low &#x3D; 2;</span><br><span class="line">$high &#x3D; 3;</span><br><span class="line">$pivot &#x3D; 6;</span><br></pre></td></tr></table></figure>

<p>完成第二步和第三步我们称为完成一个循环。</p>
<p>第四步（也就是开启下一个循环）、模仿第二步的过程执行。<br>第五步、模仿第三步的过程执行。</p>
<p>执行完第二个循环之后，数据状态如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">3   2   6   7   8   9</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;这时候,$high 减小为 3</span><br><span class="line">$low &#x3D; 2;</span><br><span class="line">$high &#x3D; 2;</span><br><span class="line">$pivot &#x3D; 6;</span><br></pre></td></tr></table></figure>

<p>到了这一步，我们发现 $low 和 $high“碰头”了：他们都指向了下标 2。于是，第一遍比较结束。得到结果如下，凡是 $pivot(=6) 左边的数都比它小，凡是 $pivot 右边的数都比它大。</p>
<p>然后，对 、$pivot 两边的数据 {3，2} 和 {7，8，9}，再分组分别进行上述的过程，直到不能再分组为止。</p>
<p>注意：第一遍快速排序不会直接得到最终结果，只会把比k大和比k小的数分到k的两边。为了得到最后结果，需要再次对下标2两边的数组分别执行此步骤，然后再分解数组，直到数组不能再分解为止（只有一个数据），才能得到正确结果。</p>
<blockquote>
<p>Partition（）函数才是整段代码的核心，因为该函数的功能是：<br>选取当中的一个关键字，比如选择第一个关键字。然后想尽办法将它放到某个位置，<br>使得它左边的值都比它小，右边的值都比它大，我们将这样的关键字成为枢轴（pivot）。</p>
</blockquote>
<h2 id="算法实现："><a href="#算法实现：" class="headerlink" title="算法实现："></a>算法实现：</h2><h3 id="PHP实现"><a href="#PHP实现" class="headerlink" title="PHP实现"></a>PHP实现</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;交换函数</span><br><span class="line">function swap(array &amp;$arr,$a,$b)&#123;</span><br><span class="line">    $tmp &#x3D; $arr[$a];</span><br><span class="line">    $arr[$a] &#x3D; $arr[$b];</span><br><span class="line">    $arr[$b] &#x3D; $tmp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;选取数组当中的一个关键字，使得它处于数组某个位置时，左边的值比它小，右边的值比它大，该关键字叫做枢轴</span><br><span class="line">&#x2F;&#x2F;使枢轴记录到位，并返回其所在位置</span><br><span class="line">function Partition(&amp;$arr,$low,$hight)&#123;</span><br><span class="line">    $pivot_value &#x3D; $arr[$low];  &#x2F;&#x2F;选取子数组第一个元素作为枢轴</span><br><span class="line">    while ($low &lt; $hight)   &#x2F;&#x2F;从数组的两端交替向中间扫描（当 $low 和 $high 碰头时结束循环）</span><br><span class="line">    &#123;</span><br><span class="line">        while ($low &lt; $hight &amp;&amp; $arr[$hight] &gt; $pivot_value)  &#x2F;&#x2F;如果改为$arr[$hight] &gt;&#x3D; $pivot_value，则最坏情况不但会堕落为O(n*n).而且除了每次比较的消耗外，还会产生n次交互的额外开销</span><br><span class="line">        &#123;</span><br><span class="line">            $hight--;</span><br><span class="line">        &#125;</span><br><span class="line">        swap($arr,$low,$hight);  &#x2F;&#x2F;终于遇到一个比$pivot小的数，将其放到数组低端</span><br><span class="line">        while ($low &lt; $hight &amp;&amp; $pivot_value &gt; $arr[$low])    &#x2F;&#x2F;如果改为$pivot_value &gt;&#x3D; $arr[$low]，则最坏情况不但会堕落为O(n*n).而且除了每次比较的消耗外，还会产生n次交互的额外开销</span><br><span class="line">        &#123;</span><br><span class="line">            $low++;</span><br><span class="line">        &#125;</span><br><span class="line">        swap($arr,$low,$hight);  &#x2F;&#x2F;终于遇到一个比$pivot大的数，将其放到数组高端</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return $low;  &#x2F;&#x2F;返回high也行，毕竟最后low和high都是停留在pivot下标处</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function Qsort(array &amp;$arr, $low, $hight)&#123;</span><br><span class="line">    &#x2F;&#x2F;当 $low &gt;&#x3D; $hight 时表示不能再进行分组，已经能够得出正确结果了</span><br><span class="line">    if($low &gt;&#x3D; $hight)&#123;</span><br><span class="line">        return ;</span><br><span class="line">    &#125;</span><br><span class="line">    $pivot_index &#x3D; Partition($arr,$low,$hight);  &#x2F;&#x2F;将$arr[$low...$high]一分为二，算出枢轴值</span><br><span class="line">    Qsort($arr,$low,$pivot_index-1);    &#x2F;&#x2F;对低子表（$pivot左边的记录）进行递归排序</span><br><span class="line">    Qsort($arr,$pivot_index+1,$hight);  &#x2F;&#x2F;对高子表（$pivot右边的记录）进行递归排序</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F;主函数</span><br><span class="line">function QuickSort(array &amp;$arr)&#123;</span><br><span class="line">    $low &#x3D; 0;</span><br><span class="line">    $hight &#x3D; count($arr) -1;</span><br><span class="line">    Qsort($arr,$low,$hight);   &#x2F;&#x2F;主函数中，由于第一遍快速排序是对整个数组排序的，因此开始是 $low&#x3D;0,$high&#x3D;count($arr)-1。</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;调用</span><br><span class="line">echo &quot;&lt;pre&gt;&quot;;</span><br><span class="line">$arr &#x3D; [6,2,7,3,8,9];</span><br><span class="line">QuickSort($arr);</span><br><span class="line">print_r($arr);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="GOLANG实现"><a href="#GOLANG实现" class="headerlink" title="GOLANG实现"></a>GOLANG实现</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;选取数组当中的一个关键字，使得它处于数组某个位置时，左边的值比它小，右边的值比它大，该关键字叫做枢轴</span><br><span class="line">&#x2F;&#x2F;使枢轴记录到位，并返回其所在位置</span><br><span class="line">func Partition(arr []int,low int , hight int) int&#123;</span><br><span class="line">	piovt_value :&#x3D; arr[low]</span><br><span class="line">	for low&lt;hight &#123;</span><br><span class="line">		for low &lt; hight &amp;&amp; arr[hight] &gt; piovt_value&#123;</span><br><span class="line">			hight--</span><br><span class="line">		&#125;</span><br><span class="line">		arr[low],arr[hight] &#x3D; arr[hight],arr[low]</span><br><span class="line">		for low &lt; hight &amp;&amp; arr[low] &lt;  piovt_value&#123;</span><br><span class="line">			low++</span><br><span class="line">		&#125;</span><br><span class="line">		arr[low],arr[hight] &#x3D; arr[hight],arr[low]</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	return low</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func Qsort(arr []int , low int ,hight int)  &#123;</span><br><span class="line">	if low &gt;&#x3D; hight &#123;</span><br><span class="line">		return</span><br><span class="line">	&#125;</span><br><span class="line">	piovt_index :&#x3D; Partition(arr,low,hight)   &#x2F;&#x2F;将$arr[$low...$high]一分为二，算出枢轴值</span><br><span class="line">	Qsort(arr,low,piovt_index-1)    &#x2F;&#x2F;对低子表（$pivot左边的记录）进行递归排序</span><br><span class="line">	Qsort(arr,piovt_index+1,hight)  &#x2F;&#x2F;对高子表（$pivot右边的记录）进行递归排序</span><br><span class="line">&#125;</span><br><span class="line">func QuickSort(arr []int)&#123;</span><br><span class="line">	low :&#x3D;0</span><br><span class="line">	hight :&#x3D; len(arr)-1</span><br><span class="line">	Qsort(arr,low,hight);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line">	arr :&#x3D; [...]int&#123;6,3,8,2,9,1&#125;</span><br><span class="line">	slice :&#x3D; arr[:]</span><br><span class="line">	fmt.Println(slice)</span><br><span class="line">	fmt.Println()</span><br><span class="line">	QuickSort(slice)</span><br><span class="line">	fmt.Println(slice)</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h3 id="PHP快速排序，代码简单但性能较低的一种实现"><a href="#PHP快速排序，代码简单但性能较低的一种实现" class="headerlink" title="PHP快速排序，代码简单但性能较低的一种实现"></a>PHP快速排序，代码简单但性能较低的一种实现</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">function quick_sort($arr) &#123;</span><br><span class="line">    &#x2F;&#x2F;先判断是否需要继续进行</span><br><span class="line">    $length &#x3D; count($arr);</span><br><span class="line">    if($length &lt;&#x3D; 1) &#123;</span><br><span class="line">        return $arr;</span><br><span class="line">    &#125;</span><br><span class="line">    &#x2F;&#x2F;如果没有返回，说明数组内的元素个数 多余1个，需要排序</span><br><span class="line">    &#x2F;&#x2F;选择一个标尺</span><br><span class="line">    &#x2F;&#x2F;选择第一个元素</span><br><span class="line">    $base_num &#x3D; $arr[0];</span><br><span class="line">    &#x2F;&#x2F;遍历 除了标尺外的所有元素，按照大小关系放入两个数组内</span><br><span class="line">    &#x2F;&#x2F;初始化两个数组</span><br><span class="line">    $left_array &#x3D; array();&#x2F;&#x2F;小于标尺的</span><br><span class="line">    $right_array &#x3D; array();&#x2F;&#x2F;大于标尺的</span><br><span class="line">    for($i&#x3D;1; $i&lt;$length; $i++) &#123;</span><br><span class="line">        if($base_num &gt; $arr[$i]) &#123;</span><br><span class="line">            &#x2F;&#x2F;放入左边数组</span><br><span class="line">            $left_array[] &#x3D; $arr[$i];</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            &#x2F;&#x2F;放入右边</span><br><span class="line">            $right_array[] &#x3D; $arr[$i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    &#x2F;&#x2F;再分别对 左边 和 右边的数组进行相同的排序处理方式</span><br><span class="line">    &#x2F;&#x2F;递归调用这个函数,并记录结果</span><br><span class="line">    $left_array &#x3D; quick_sort($left_array);</span><br><span class="line">    $right_array &#x3D; quick_sort($right_array);</span><br><span class="line">    &#x2F;&#x2F;合并左边 标尺 右边</span><br><span class="line">    return array_merge($left_array, array($base_num), $right_array);</span><br><span class="line"></span><br></pre></td></tr></table></figure>





<p>参考文档</p>
<p> <a target="_blank" rel="noopener" href="https://blog.csdn.net/baidu_30000217/article/details/53311840">PHP实现排序算法—-快速排序（Quick Sort）、快排 - CSDN博客</a></p>
<p> <a target="_blank" rel="noopener" href="https://www.cnblogs.com/firstForEver/p/5155393.html">快速排序的php实现 - 根号五 - 博客园</a></p>
<p> 大话数据结构</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/08/06/hello-world/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nolan Chic">
      <meta itemprop="description" content="Action speak louder than words.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Nolan's Notes">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/08/06/hello-world/" class="post-title-link" itemprop="url">Hello World</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-08-06 15:08:00" itemprop="dateCreated datePublished" datetime="2017-08-06T15:08:00+08:00">2017-08-06</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-09-16 18:47:34" itemprop="dateModified" datetime="2020-09-16T18:47:34+08:00">2020-09-16</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Welcome to <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a target="_blank" rel="noopener" href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a target="_blank" rel="noopener" href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/deployment.html">Deployment</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/03/12/Linux/Mac%20find%20%E5%8E%BB%E9%99%A4%20%E2%80%9CPermission%20denied%E2%80%9D%20%E4%BF%A1%E6%81%AF/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nolan Chic">
      <meta itemprop="description" content="Action speak louder than words.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Nolan's Notes">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/03/12/Linux/Mac%20find%20%E5%8E%BB%E9%99%A4%20%E2%80%9CPermission%20denied%E2%80%9D%20%E4%BF%A1%E6%81%AF/" class="post-title-link" itemprop="url">Mac find 去除 “Permission denied” 信息</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-03-12 10:00:04" itemprop="dateCreated datePublished" datetime="2017-03-12T10:00:04+08:00">2017-03-12</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-09-16 18:47:34" itemprop="dateModified" datetime="2020-09-16T18:47:34+08:00">2020-09-16</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Mac-find-去除-“Permission-denied”-信息"><a href="#Mac-find-去除-“Permission-denied”-信息" class="headerlink" title="Mac find 去除 “Permission denied” 信息"></a>Mac find 去除 “Permission denied” 信息</h1><p>Mac 下查找文件，最简单的方法应该是</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mdfind filename</span><br></pre></td></tr></table></figure>

<p>等同于</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mdfind -name filename</span><br></pre></td></tr></table></figure>

<p>不过，mdfind 貌似无法查找隐藏文件，比如，你要查找.zshrc，那么，用mdfind .zshrc 将一无所获。</p>
<p>此时，我们还是需要用回 find 命令。但如果我们用</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find &#x2F; -name .zshrc</span><br></pre></td></tr></table></figure>

<p>我们将发行满屏的permission denied，如</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">... ...</span><br><span class="line">find: &#x2F;private&#x2F;var&#x2F;spool&#x2F;postfix&#x2F;hold: Permission denied</span><br><span class="line">find: &#x2F;private&#x2F;var&#x2F;spool&#x2F;postfix&#x2F;incoming: Permission denied</span><br><span class="line">find: &#x2F;private&#x2F;var&#x2F;spool&#x2F;postfix&#x2F;maildrop: Permission denied</span><br><span class="line">... ...</span><br></pre></td></tr></table></figure>

<p>这不是我们想看到的结果，如何阻止这些  <font color=#c7254e background-color=#f9f2f4 size=4> permission denied </font>信息呢。</p>
<p>主要有以下三种方法：</p>
<ul>
<li>用管理员权限执行 <font color=#c7254e background-color=#f9f2f4 size=4> find </font></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo find &#x2F; -name &quot;keyword&quot; -print</span><br></pre></td></tr></table></figure>

<ul>
<li>丢弃所有错误输出</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find &#x2F; -name &quot;keyword&quot; -print 2&gt;&#x2F;dev&#x2F;null</span><br></pre></td></tr></table></figure>
<ul>
<li>过滤 <font color=#c7254e background-color=#f9f2f4 size=4> permission denied </font> 信息</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find &#x2F; -name &quot;keyword&quot; -print 2&gt;&amp;1 | fgrep -v &quot;Permission denied&quot;</span><br></pre></td></tr></table></figure>






      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/02/16/Linux/iptables%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97%E4%BB%8B%E7%BB%8D/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nolan Chic">
      <meta itemprop="description" content="Action speak louder than words.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Nolan's Notes">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/02/16/Linux/iptables%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97%E4%BB%8B%E7%BB%8D/" class="post-title-link" itemprop="url">iptables常用模块介绍</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-02-16 09:59:47" itemprop="dateCreated datePublished" datetime="2017-02-16T09:59:47+08:00">2017-02-16</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-09-16 18:47:34" itemprop="dateModified" datetime="2020-09-16T18:47:34+08:00">2020-09-16</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="iptables常用模块介绍"><a href="#iptables常用模块介绍" class="headerlink" title="iptables常用模块介绍"></a>iptables常用模块介绍</h1><h2 id="connlimit"><a href="#connlimit" class="headerlink" title="connlimit"></a>connlimit</h2><p>connlimit模块允许你限制每个客户端ip的并发连接数，即每个ip同时连接到一个服务器个数。</p>
<p>connlimit模块主要可以限制内网用户的网络使用，对服务器而言则可以限制每个ip发起的连接数。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">--connlimit-above n 限制为多少个</span><br><span class="line">--connlimit-mask n 这组主机的掩码,默认是connlimit-mask 32 ,即每ip.</span><br></pre></td></tr></table></figure>

<p>＃限制除了172.16.130.40此ip外,其他ip通过TCP访问444端口并发数为30</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">iptables -I INPUT -p tcp --dport 444 -m connlimit --connlimit-above 30 -j REJECT</span><br><span class="line"></span><br><span class="line">iptables -I INPUT -s 172.16.130.40 -p tcp --dport 444  -j ACCEPT</span><br></pre></td></tr></table></figure>

<p>＃允许每个客户机同时两个telnet连接</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">iptables -A INPUT -p tcp --syn --dport 23 -m connlimit --connlimit-above 2 -j REJECT</span><br><span class="line">或</span><br><span class="line">iptables -A INPUT -p tcp --syn --dport 23 -m connlimit ! --connlimit-above 2 -j ACCEPT</span><br></pre></td></tr></table></figure>

<p>＃只允许每组C类ip同时16个http连接</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iptables -p tcp --syn --dport 80 -m connlimit --connlimit-above 16 --connlimit-mask 24 -j REJECT</span><br></pre></td></tr></table></figure>

<p>＃只允许每个ip同时5个80端口转发,超过的丢弃:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iptables -I FORWARD -p tcp --syn --dport 80 -m connlimit --connlimit-above 5 -j DROP</span><br></pre></td></tr></table></figure>

<p>＃只允许每组C类ip同时10个80端口转发:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iptables -I FORWARD -p tcp --syn --dport 80 -m connlimit --connlimit-above 10 --connlimit-mask 24 -j DROP</span><br></pre></td></tr></table></figure>

<p>＃为了防止DOS太多连接进来,那么可以允许最多15个初始连接,超过的丢弃.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">iptables -A INPUT -s 192.186.1.0&#x2F;24 -p tcp --syn -m connlimit --connlimit-above 15 -j DROP</span><br><span class="line"></span><br><span class="line">iptables -A INPUT -s 192.186.1.0&#x2F;24 -p tcp -m state --state ESTABLISHED,RELATED -j ACCEP</span><br></pre></td></tr></table></figure>



<p>本文地址: <a target="_blank" rel="noopener" href="http://www.cszhi.com/20120510/iptables-modules-connlimit.html">http://www.cszhi.com/20120510/iptables-modules-connlimit.html</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/02/07/NGINX/NGINX%E9%98%B2%E6%AD%A2CC%E6%94%BB%E5%87%BB/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nolan Chic">
      <meta itemprop="description" content="Action speak louder than words.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Nolan's Notes">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/02/07/NGINX/NGINX%E9%98%B2%E6%AD%A2CC%E6%94%BB%E5%87%BB/" class="post-title-link" itemprop="url">NGINX防止CC攻击</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-02-07 19:45:40" itemprop="dateCreated datePublished" datetime="2017-02-07T19:45:40+08:00">2017-02-07</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-09-16 18:47:34" itemprop="dateModified" datetime="2020-09-16T18:47:34+08:00">2020-09-16</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/NGINX/" itemprop="url" rel="index"><span itemprop="name">NGINX</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="NGINX防止CC攻击"><a href="#NGINX防止CC攻击" class="headerlink" title="NGINX防止CC攻击"></a>NGINX防止CC攻击</h1><p>1.geo指令定义了一个白名单</p>
<p>2.使用map指令映射搜索引擎客户端的ip为空串，如果不是搜索引擎就显示本身真实的ip，这样搜索引擎ip就不能存到limit_req_zone内存session中，所以不会限制搜索引擎的ip访问</p>
<p>3.ngx_http_limit_req_module模块</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">limit_req_zone $binary_remote_addr zone&#x3D;perip:10m rate&#x3D;1r&#x2F;s;</span><br><span class="line">limit_req_zone $server_name zone&#x3D;perserver:10m rate&#x3D;10r&#x2F;s;</span><br><span class="line"></span><br><span class="line">server &#123;</span><br><span class="line">    ...</span><br><span class="line">    limit_req zone&#x3D;perip burst&#x3D;5 nodelay;</span><br><span class="line">    limit_req zone&#x3D;perserver burst&#x3D;10;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>nginx.conf文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">http&#123;</span><br><span class="line">    #定义白名单 limited</span><br><span class="line">    geo $limited&#123;</span><br><span class="line">        default 1;</span><br><span class="line">        172.16.130.40&#x2F;32 0;</span><br><span class="line">    &#125;</span><br><span class="line">    #自定义$limit</span><br><span class="line">    map $limited $limit &#123;</span><br><span class="line">        1 $binary_remote_addr;</span><br><span class="line">        0 &quot;&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">     map $limited $limit_server_name &#123;</span><br><span class="line">        1 $server_name;</span><br><span class="line">        0 &quot;&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">      limit_req_zone $limit zone&#x3D;perip:10m rate&#x3D;1r&#x2F;s;</span><br><span class="line">      limit_req_zone $limit_server_name zone&#x3D;perserver:10m rate&#x3D;1r&#x2F;s;</span><br><span class="line">      include ssl.conf;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ssl.conf文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    server_name 127.0.0.1;</span><br><span class="line">    listen 444;</span><br><span class="line">    listen [::]:444;</span><br><span class="line">    ssl on;</span><br><span class="line">    ssl_certificate &#x2F;Data&#x2F;apps&#x2F;nginx&#x2F;conf&#x2F;33iq.crt;</span><br><span class="line">    ssl_certificate_key &#x2F;Data&#x2F;apps&#x2F;nginx&#x2F;conf&#x2F;33iq_nopass.key;</span><br><span class="line">    ssl_protocols TLSv1 TLSv1.1 TLSv1.2;</span><br><span class="line">    ssl_ciphers ECDHE-RSA-AES256-SHA384:AES256-SHA256:!RC4:HIGH:!MD5:!aNULL:!eNULL:!NULL:!DH:!EDH:!AESGCM;</span><br><span class="line">    ssl_prefer_server_ciphers on;</span><br><span class="line">    ssl_session_cache shared:SSL:10m;</span><br><span class="line">    ssl_session_timeout 10m;</span><br><span class="line">    client_max_body_size 512M;</span><br><span class="line">    root   &#x2F;Data&#x2F;apps&#x2F;wwwroot&#x2F;firewall&#x2F;apps&#x2F;admin;</span><br><span class="line">    index  index.html index.htm index.php;</span><br><span class="line">    location &#x2F; &#123;</span><br><span class="line">        limit_req zone&#x3D;perip burst&#x3D;5 nodelay;</span><br><span class="line">        limit_req zone&#x3D;perserver burst&#x3D;10;</span><br><span class="line">        index  index.htm index.html index.php;</span><br><span class="line">        if (!-e $request_filename)&#123;</span><br><span class="line">            rewrite ^(.*)$ &#x2F;index.php last;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    location ~ \.php(.*)$ &#123;</span><br><span class="line">        fastcgi_pass   127.0.0.1:9000;</span><br><span class="line">        fastcgi_index  index.php;</span><br><span class="line">        fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;</span><br><span class="line">        fastcgi_param  PATH_INFO  $fastcgi_path_info;</span><br><span class="line">        include        fastcgi_params;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/u012566181/article/details/49968283">https://blog.csdn.net/u012566181/article/details/49968283</a></p>
<p><a target="_blank" rel="noopener" href="http://nginx.org/en/docs/http/ngx_http_limit_req_module.html">http://nginx.org/en/docs/http/ngx_http_limit_req_module.html</a></p>
<p><a target="_blank" rel="noopener" href="http://nginx.org/en/docs/http/ngx_http_limit_conn_module.html">http://nginx.org/en/docs/http/ngx_http_limit_conn_module.html</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/06/18/PHP/PHP%E7%9A%84%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E6%9C%BA%E5%88%B6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nolan Chic">
      <meta itemprop="description" content="Action speak louder than words.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Nolan's Notes">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2016/06/18/PHP/PHP%E7%9A%84%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E6%9C%BA%E5%88%B6/" class="post-title-link" itemprop="url">PHP的垃圾回收机制</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2016-06-18 10:53:00" itemprop="dateCreated datePublished" datetime="2016-06-18T10:53:00+08:00">2016-06-18</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-09-16 18:45:11" itemprop="dateModified" datetime="2020-09-16T18:45:11+08:00">2020-09-16</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/PHP/" itemprop="url" rel="index"><span itemprop="name">PHP</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="PHP的垃圾回收机制"><a href="#PHP的垃圾回收机制" class="headerlink" title="PHP的垃圾回收机制"></a>PHP的垃圾回收机制</h1><h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>平时听到大神提到的GC ,就是垃圾回收器,全称Garbage Collection.<br>在介绍这个新的GC之前，读者必须先了解PHP中变量的内部存储相关知识，请先阅读<a target="_blank" rel="noopener" href="https://blog.csdn.net/phpkernel/article/details/5732784">变量的内部存储：引用和计数</a></p>
<h3 id="变量的结构与类型"><a href="#变量的结构与类型" class="headerlink" title="变量的结构与类型"></a>变量的结构与类型</h3><p>PHP在内核中是通过zval这个结构体来存储变量的，所以写扩展的时候当然也是一样。<br>在Zend/zend.h文件中找到了其定义：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">struct _zval_struct &#123;</span><br><span class="line">    zvalue_value value; &#x2F;* 变量的值 *&#x2F;</span><br><span class="line">    zend_uint refcount__gc;</span><br><span class="line">    zend_uchar type;    &#x2F;* 变量当前的数据类型 *&#x2F;</span><br><span class="line">    zend_uchar is_ref__gc;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>快速理解:为方便起见可以直接把zval结构体理解成一个由</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">value</span><br><span class="line">type</span><br><span class="line">refcount__gc</span><br><span class="line">is_ref__gc</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<blockquote>
<p>组成的对象就好了，*__gc是管理内存相关的时候会用到的,这里可以先不管。</p>
</blockquote>
<h3 id="什么算垃圾"><a href="#什么算垃圾" class="headerlink" title="什么算垃圾"></a>什么算垃圾</h3><p> 首先我们需要定义一下“垃圾”的概念，新的GC负责清理的垃圾是指变量的容器zval还存在，但是又没有任何变量名指向此zval。因此GC判断是否为垃圾的一个重要标准是有没有变量名指向变量容器zval。</p>
<p>  假设我们有一段PHP代码，使用了一个临时变量$tmp存储了一个字符串，在处理完字符串之后，就不需要这个$tmp变量了，$tmp变量对于我们来说可以算是一个“垃圾”了，但是对于GC来说，$tmp其实并不是一个垃圾，$tmp变量对我们没有意义，但是这个变量实际还存在，$tmp符号依然指向它所对应的zval，GC会认为PHP代码中可能还会使用到此变量，所以不会将其定义为垃圾。</p>
<p>  那么如果我们在PHP代码中使用完$tmp后，调用unset删除这个变量，那么$tmp是不是就成为一个垃圾了呢。很可惜，GC仍然不认为$tmp是一个垃圾，因为$tmp在unset之后，refcount减少1变成了0(这里假设没有别的变量和$tmp指向相同的zval),这个时候GC会直接将$tmp对应的zval的内存空间释放，$tmp和其对应的zval就根本不存在了。此时的$tmp也不是新的GC所要对付的那种“垃圾”。那么新的GC究竟要对付什么样的垃圾呢，下面我们将生产一个这样的垃圾。  </p>
<h3 id="顽固垃圾的产生过程"><a href="#顽固垃圾的产生过程" class="headerlink" title="顽固垃圾的产生过程"></a>顽固垃圾的产生过程</h3><p> 如果读者已经阅读了变量内部存储相关的内容，想必对refcount和isref这些变量内部的信息有了一定的了解。这里我们将结合手册中的一个例子来介绍垃圾的产生过程：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"></span><br><span class="line">$a &#x3D; &quot;new string&quot;;</span><br><span class="line"></span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>
<p>在这么简单的一个代码中，$a变量内部存储信息为a: (refcount=1, is_ref=0)=’new string’<br>当把$a赋值给另外一个变量的时候，$a对应的zval的refcount会加1</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"></span><br><span class="line">$a &#x3D; &quot;new string&quot;;</span><br><span class="line"></span><br><span class="line">$b &#x3D; $a;</span><br><span class="line"></span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>

<p>此时$a和$b变量对应的内部存储信息为</p>
<p>a,b: (refcount=2, is_ref=0)=’new string’</p>
<p>当我们用unset删除$b变量的时候，$b对应的zval的refcount会减少1</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;?php</span><br><span class="line"></span><br><span class="line">$a &#x3D; &quot;new string&quot;; &#x2F;&#x2F;a: (refcount&#x3D;1, is_ref&#x3D;0)&#x3D;&#39;new string&#39;</span><br><span class="line"></span><br><span class="line">$b &#x3D; $a;                 &#x2F;&#x2F;a,b: (refcount&#x3D;2, is_ref&#x3D;0)&#x3D;&#39;new string&#39;</span><br><span class="line"></span><br><span class="line">unset($b);              &#x2F;&#x2F;a: (refcount&#x3D;1, is_ref&#x3D;0)&#x3D;&#39;new string&#39;</span><br><span class="line"></span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>

<p>对于普通的变量来说，这一切似乎很正常，但是在复合类型变量（数组和对象）中，会发生比较有意思的事情：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"></span><br><span class="line">$a &#x3D; array(&#39;meaning&#39; &#x3D;&gt; &#39;life&#39;, &#39;number&#39; &#x3D;&gt; 42);</span><br><span class="line"></span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>


<p>a的内部存储信息为:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a: (refcount&#x3D;1, is_ref&#x3D;0)&#x3D;array (</span><br><span class="line">   &#39;meaning&#39; &#x3D;&gt; (refcount&#x3D;1, is_ref&#x3D;0)&#x3D;&#39;life&#39;,</span><br><span class="line">   &#39;number&#39; &#x3D;&gt; (refcount&#x3D;1, is_ref&#x3D;0)&#x3D;42</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>数组变量本身($a)在引擎内部实际上是一个哈希表，这张表中有两个zval项 meaning和number，<br>所以实际上那一行代码中一共生成了3个zval,这3个zval都遵循变量的引用和计数原则，用图来表示:<br><img src="https://note.youdao.com/yws/public/resource/5978c86577f2382879467cc51562a46c/xmlnote/50B46E979DC140F69A194BC68B2540CB/6159"></p>
<p> 下面在$a中添加一个元素，并将现有的一个元素的值赋给新的元素:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"></span><br><span class="line">$a &#x3D; array(&#39;meaning&#39; &#x3D;&gt; &#39;life&#39;, &#39;number&#39; &#x3D;&gt; 42);</span><br><span class="line"></span><br><span class="line">$a[&#39;life&#39;] &#x3D; $a[&#39;meaning&#39;];</span><br><span class="line"></span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>

<p>那么$a的内部存储为:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">a: (refcount&#x3D;1, is_ref&#x3D;0)&#x3D;array (</span><br><span class="line">   &#39;meaning&#39; &#x3D;&gt; (refcount&#x3D;2, is_ref&#x3D;0)&#x3D;&#39;life&#39;,</span><br><span class="line">   &#39;number&#39; &#x3D;&gt; (refcount&#x3D;1, is_ref&#x3D;0)&#x3D;42,</span><br><span class="line">   &#39;life&#39; &#x3D;&gt; (refcount&#x3D;2, is_ref&#x3D;0)&#x3D;&#39;life&#39;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>其中的meaning元素和life元素之指向同一个zval的：<br><img src="https://note.youdao.com/yws/public/resource/5978c86577f2382879467cc51562a46c/xmlnote/DA4F603A6F774B74A73EB19995D9154A/6161"></p>
<p>现在，如果我们试一下，将数组的引用赋值给数组中的一个元素，有意思的事情就发生了：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"></span><br><span class="line">$a &#x3D; array(&#39;one&#39;);</span><br><span class="line"></span><br><span class="line">$a[] &#x3D; &amp;$a;</span><br><span class="line"></span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>

<p>这样$a数组就有两个元素，一个索引为0，值为字符one,另外一个索引为1，为$a自身的引用，内部存储如下:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a: (refcount&#x3D;2, is_ref&#x3D;1)&#x3D;array (</span><br><span class="line">   0 &#x3D;&gt; (refcount&#x3D;1, is_ref&#x3D;0)&#x3D;&#39;one&#39;,</span><br><span class="line">   1 &#x3D;&gt; (refcount&#x3D;2, is_ref&#x3D;1)&#x3D;…</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>“…”表示1指向a自身，是一个环形引用：<br><img src="https://note.youdao.com/yws/public/resource/5978c86577f2382879467cc51562a46c/xmlnote/A07BDA83DE984B0BA6111B02ECA175FD/6163"></p>
<p>这个时候我们对$a进行unset,那么$a会从符号表中删除，同时$a指向的zval的refcount减少1</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"></span><br><span class="line">$a &#x3D; array(&#39;one&#39;);</span><br><span class="line"></span><br><span class="line">$a[] &#x3D; &amp;$a;</span><br><span class="line"></span><br><span class="line">unset($a);</span><br><span class="line"></span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>

<p>那么问题也就产生了，$a已经不在符号表中了，用户无法再访问此变量，但是$a之前指向的zval的refcount变为1而不是0，因此不能被回收，这样产生了内存泄露：</p>
<p><img src="https://note.youdao.com/yws/public/resource/5978c86577f2382879467cc51562a46c/xmlnote/43D6D4974BFD4D6F9C38BEE0F1BF90F5/6165"></p>
<p>这样，这么一个zval就成为了一个真是意义的垃圾了，新的GC要做的工作就是清理这种垃圾。</p>
<h3 id="为解决这种垃圾，PHP5-3以后的GC"><a href="#为解决这种垃圾，PHP5-3以后的GC" class="headerlink" title="为解决这种垃圾，PHP5.3以后的GC"></a>为解决这种垃圾，PHP5.3以后的GC</h3><p> 在PHP5.3版本中，使用了专门GC机制清理垃圾，在之前的版本中是没有专门的GC，那么垃圾产生的时候，没有办法清理，内存就白白浪费掉了。在PHP5.3源代码中多了以下文件:{PHPSRC}/Zend/zend_gc.h {PHPSRC}/Zend/zend_gc.c, 这里就是新的GC的实现。</p>
<h3 id="GC算法"><a href="#GC算法" class="headerlink" title="GC算法"></a>GC算法</h3><p> 在较新的PHP手册中有简单的介绍新的GC使用的垃圾清理算法，这个算法名为 Concurrent Cycle Collection in Reference Counted Systems ， 这里不详细介绍此算法，根据手册中的内容来先简单的介绍一下思路：</p>
<h4 id="判断处理过程"><a href="#判断处理过程" class="headerlink" title="判断处理过程"></a>判断处理过程</h4><ul>
<li><p>1：如果一个zval的refcount增加，那么此zval还在使用，不属于垃圾</p>
</li>
<li><p>2：如果一个zval的refcount减少到0， 那么zval可以被释放掉，不属于垃圾</p>
</li>
<li><p>3：如果一个zval的refcount减少之后大于0，那么此zval还不能被释放，此zval可能成为一个垃圾</p>
</li>
</ul>
<p>只有在准则3下，GC才会把zval收集起来，然后通过新的算法来判断此zval是否为垃圾。那么如何判断这么一个变量是否为真正的垃圾呢？</p>
<p>简单的说，就是对此zval中的每个元素进行一次refcount减1操作，操作完成之后，如果zval的refcount=0，那么这个zval就是一个垃圾。首先引用手册中的一张图:</p>
<p><img src="https://note.youdao.com/yws/public/resource/621137a5f14579fa1d790a0df8eb2974/xmlnote/WEBRESOURCEc481866e828f6f8e1bc7e377bd4bbf4e/6171"></p>
<p>A：为了避免每次变量的refcount减少的时候都调用GC的算法进行垃圾判断，此算法会先把所有前面准则3情况下的zval节点放入一个节点(root)缓冲区(root buffer)，并且将这些zval节点标记成紫色，同时算法必须确保每一个zval节点在缓冲区中之出现一次。当缓冲区被节点塞满的时候，GC才开始开始对缓冲区中的zval节点进行垃圾判断。</p>
<p>B：当缓冲区满了之后，算法以深度优先对每一个节点所包含的zval进行减1操作，为了确保不会对同一个zval的refcount重复执行减1操作，一旦zval的refcount减1之后会将zval标记成灰色。需要强调的是，这个步骤中，起初节点zval本身不做减1操作，但是如果节点zval中包含的zval又指向了节点zval（环形引用），那么这个时候需要对节点zval进行减1操作。</p>
<p>C：算法再次以深度优先判断每一个节点包含的zval的值，如果zval的refcount等于0，那么将其标记成白色(代表垃圾)，如果zval的refcount大于0，那么将对此zval以及其包含的zval进行refcount加1操作，这个是对非垃圾的还原操作，同时将这些zval的颜色变成黑色（zval的默认颜色属性）</p>
<p>D：遍历zval节点，将C中标记成白色的节点zval释放掉。</p>
<p>来个白话文版的：<br>例如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">    $a &#x3D; [&#39;one&#39;]; --- zval_a（将$a对应的zval，命名为zval_a）</span><br><span class="line">    $a[] &#x3D; &amp;$a; --- step1</span><br><span class="line">    unset($a);  --- step2</span><br><span class="line">    </span><br></pre></td></tr></table></figure>

<p>为进行unset之前(step1)，进行算法计算，对这个数组中的所有元素（索引0和索引1）的zval的refcount进行减1操作，由于索引1对应的就是zval_a，所以这个时候zval_a的refcount应该变成了1，这样说明zval_a不是一个垃圾不进行回收。</p>
<p>当执行unset的时候(step2)，进行算法计算，由于环形引用，上文得出会有垃圾的结构体，zval_a的refcount是1(zval_a中的索引1指向zval_a)，用算法对数组中的所有元素（索引0和索引1）的zval的refcount进行减1操作，这样zval_a的refcount就会变成0，于是就认为zval_a是一个需要回收的垃圾。</p>
<p>算法总的套路:<strong>对于一个包含环形引用的数组，对数组中包含的每个元素的zval进行减1操作，之后如果发现数组自身的zval的refcount变成了0，那么可以判断这个数组是一个垃圾。</strong></p>
<h3 id="算法优化配置"><a href="#算法优化配置" class="headerlink" title="算法优化配置"></a>算法优化配置</h3><p>可能会发现，每次都进行这样的操作好像会影响性能，是的，php做事情套路都是走批量的原则。</p>
<p>申请内存也是申请一大块，仅使用当前的一小部分剩下的等下回再用，避免多次申请。</p>
<p>这个gc算法也是这样，会有一个缓冲区的概念，等缓冲区满了才会一次性去给清掉。</p>
<ul>
<li>开关配置</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">php.ini中设置 zend.enable_gc 项来开启或则关闭GC。</span><br></pre></td></tr></table></figure>

<ul>
<li><p>缓冲区配置<br>缓冲区默认可以放10,000个节点，当缓冲区满了才会清理。可以通过修改Zend/zend_gc.c中的<code>GC_ROOT_BUFFER_MAX_ENTRIES</code> 来改变这个数值，需要重新编译链接PHP</p>
</li>
<li><p>关键函数</p>
</li>
</ul>
<p><code>gc_enable()</code> : 开启GC</p>
<p><code>gc_disable()</code> : 关闭GC</p>
<p><code>gc_collect_cycles()</code> : 在节点缓冲区未满的情况下强制执行垃圾分析算法</p>
<h3 id="涉及到垃圾回收的知识点"><a href="#涉及到垃圾回收的知识点" class="headerlink" title="涉及到垃圾回收的知识点"></a>涉及到垃圾回收的知识点</h3><ul>
<li>unset函数</li>
</ul>
<p>unset只是断开一个变量到一块内存区域的连接，同时将该内存区域的引用计数-1；内存是否回收主要还是看refcount是否到0了，以及gc算法判断。</p>
<ul>
<li>= null 操作</li>
</ul>
<p>a=null是直接将a 指向的数据结构置空，同时将其引用计数归0。</p>
<ul>
<li>脚本执行结束</li>
</ul>
<p>脚本执行结束，该脚本中使用的所有内存都会被释放，不论是否有引用环。</p>
<h5 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h5><p><a target="_blank" rel="noopener" href="http://www.php.net/manual/en/features.gc.php">参考文档</a><br><a target="_blank" rel="noopener" href="https://www.cnblogs.com/orlion/p/5350844.html">参考文档</a><br><a target="_blank" rel="noopener" href="https://blog.csdn.net/u011957758/article/details/76864400">参考文档</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Nolan Chic</p>
  <div class="site-description" itemprop="description">Action speak louder than words.</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">10</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">9</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Nolan Chic</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
